<div class="guide-wrapper text-slate-50 font-sans selection:bg-emerald-500/30 min-h-screen">
    <div class="gradient-bg"></div>
    <div class="grain-overlay"></div>

    <div class="relative z-10 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <!-- Back Link -->
        <a href="/dashboard" class="inline-flex items-center gap-2 text-slate-400 hover:text-emerald-400 transition-colors mb-8 group">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 group-hover:-translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
            </svg>
            Zurück zum Dashboard
        </a>

        <!-- Header -->
        <header class="mb-10">
            <span class="inline-block px-3 py-1 mb-4 text-xs font-bold tracking-widest text-emerald-300 uppercase bg-slate-900/60 border border-teal-500/30 rounded-full backdrop-blur-sm">
                Anleitung
            </span>
            <h1 class="text-3xl md:text-4xl font-extrabold tracking-tight text-white mb-3">
                Schulnetz Kalender-URL finden
            </h1>
            <p class="text-slate-400 text-lg">
                Folge diesen Schritten, um deine persönliche Kalender-URL aus dem Schulnetz zu kopieren.
            </p>
        </header>

        <!-- Steps -->
        <div class="space-y-6">
            <!-- Step 1 -->
            <div class="rounded-2xl bg-slate-900/60 border border-slate-700/50 p-6 hover:border-emerald-500/30 transition-all">
                <div class="flex items-start gap-4">
                    <div class="flex-shrink-0 w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center text-white font-bold text-lg shadow-lg shadow-emerald-500/20">
                        1
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold text-white mb-2">Im Schulnetz einloggen</h3>
                        <p class="text-slate-400 leading-relaxed">
                            Öffne das <strong class="text-slate-200">Schulnetz</strong> deiner Schule in einem neuen Tab und melde dich mit deinen Zugangsdaten an.
                        </p>
                        <div class="mt-3 p-3 bg-slate-950/50 rounded-xl border border-slate-800">
                            <p class="text-xs text-slate-500">Beispiel-URL:</p>
                            <a href="https://schulnetz.lu.ch/" target="_blank" class="text-emerald-400 text-sm hover:text-emerald-300 transition-colors">https://schulnetz.lu.ch/</a>
                        </div>
                    </div>
                </div>
                <div (click)="openLightbox('/images/guide/linktocalander1.webp', 'Schulnetz Login Seite')" class="block mt-4 rounded-xl overflow-hidden border border-slate-700/50 hover:border-emerald-500/50 transition-all cursor-zoom-in">
                    <img 
                        src="/images/guide/linktocalander1.webp" 
                        alt="Schulnetz Login Seite - Klicken zum Vergrössern" 
                        loading="lazy"
                        class="w-full h-auto"
                    >
                </div>
                <p class="text-xs text-slate-500 mt-2 text-center">Klicken zum Vergrössern</p>
            </div>

            <!-- Step 2 -->
            <div class="rounded-2xl bg-slate-900/60 border border-slate-700/50 p-6 hover:border-emerald-500/30 transition-all">
                <div class="flex items-start gap-4">
                    <div class="flex-shrink-0 w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center text-white font-bold text-lg shadow-lg shadow-emerald-500/20">
                        2
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold text-white mb-2">Stundenplan-Abo freigeben</h3>
                        <p class="text-slate-400 leading-relaxed">
                            Auf der <strong class="text-slate-200">Startseite</strong> scrolle ganz nach unten und klicke auf den Link <strong class="text-slate-200">"Stundenplan-Abo freigeben"</strong>.
                        </p>
                        <div class="mt-3 inline-flex items-center gap-2 px-4 py-2 bg-slate-800 rounded-lg border border-slate-700">
                            
                            
                        </div>
                    </div>
                </div>
                <div (click)="openLightbox('/images/guide/startpageschulnetz2.webp', 'Startseite mit Stundenplan-Abo Link')" class="block mt-4 rounded-xl overflow-hidden border border-slate-700/50 hover:border-emerald-500/50 transition-all cursor-zoom-in">
                    <img 
                        src="/images/guide/startpageschulnetz2.webp" 
                        alt="Startseite mit Stundenplan-Abo Link - Klicken zum Vergrössern" 
                        loading="lazy"
                        class="w-full h-auto"
                    >
                </div>
                <p class="text-xs text-slate-500 mt-2 text-center">Klicken zum Vergrössern</p>
            </div>

            <!-- Step 3 -->
            <div class="rounded-2xl bg-slate-900/60 border border-slate-700/50 p-6 hover:border-emerald-500/30 transition-all">
                <div class="flex items-start gap-4">
                    <div class="flex-shrink-0 w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center text-white font-bold text-lg shadow-lg shadow-emerald-500/20">
                        3
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold text-white mb-2">Link kopieren</h3>
                        <p class="text-slate-400 leading-relaxed mb-3">
                            Es öffnet sich die <strong class="text-slate-200">Stundenplan-Abo</strong> Seite. Hier kannst du den Link zum Stundenplan-Abo als <strong class="text-slate-200">QR Code</strong> anfordern oder per <strong class="text-slate-200">E-Mail</strong> senden lassen.
                        </p>
                        <p class="text-slate-400 leading-relaxed">
                            <strong class="text-slate-200">Kopiere den angezeigten Link</strong> und füge ihn im Dashboard in das Feld "Schulnetz URL" ein.
                        </p>
                        <div class="mt-4 p-4 bg-amber-500/10 border border-amber-500/30 rounded-xl">
                            <div class="flex items-start gap-3">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-amber-400 flex-shrink-0 mt-0.5" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
                                </svg>
                                <p class="text-amber-200 text-sm">
                                    <strong>Hinweis:</strong> Um die Funktion später zu deaktivieren, kannst du auf "Stundenplan-Abo sperren" klicken.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <div (click)="openLightbox('/images/guide/3.webp', 'Stundenplan-Abo Seite mit Link')" class="block mt-4 rounded-xl overflow-hidden border border-slate-700/50 hover:border-emerald-500/50 transition-all cursor-zoom-in">
                    <img 
                        src="/images/guide/3.webp" 
                        alt="Stundenplan-Abo Seite mit Link - Klicken zum Vergrössern" 
                        loading="lazy"
                        class="w-full h-auto"
                    >
                </div>
                <p class="text-xs text-slate-500 mt-2 text-center">Klicken zum Vergrössern</p>
            </div>
        </div>

        <!-- Info Box -->
        <div class="mt-10 p-6 rounded-2xl bg-emerald-500/10 border border-emerald-500/30">
            <div class="flex items-start gap-4">
                <div class="flex-shrink-0 w-10 h-10 rounded-xl bg-emerald-500/20 flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-emerald-400" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
                    </svg>
                </div>
                <div>
                    <h4 class="text-emerald-300 font-semibold mb-1">Warum brauchen wir das?</h4>
                    <p class="text-slate-400 text-sm leading-relaxed">
                        Mit deiner Kalender-URL können wir automatisch deine Lektionen abrufen und das Absenzformular korrekt ausfüllen. Deine Daten bleiben privat und werden nur für die PDF-Generierung verwendet.
                    </p>
                </div>
            </div>
        </div>

        <!-- CTA -->
        <div class="mt-10 text-center">
            <a href="/dashboard" class="inline-flex items-center justify-center px-8 py-4 rounded-full bg-gradient-to-r from-emerald-500 to-teal-500 text-slate-900 font-bold text-sm tracking-widest uppercase hover:shadow-lg hover:shadow-emerald-500/30 hover:-translate-y-1 transition-all duration-200">
                Zurück zum Dashboard
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2 -mr-1" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd" />
                </svg>
            </a>
        </div>
    </div>
</div>

<!-- Lightbox Modal -->
<div *ngIf="lightboxImage" 
     class="fixed inset-0 z-50 flex items-center justify-center p-4 md:p-8"
     (click)="closeLightbox()">
    <!-- Backdrop -->
    <div class="absolute inset-0 bg-slate-950/95 backdrop-blur-sm"></div>
    
    <!-- Close button -->
    <button 
        (click)="closeLightbox()"
        class="absolute top-4 right-4 z-10 p-2 rounded-full bg-slate-800/80 text-slate-400 hover:text-white hover:bg-slate-700 transition-all"
    >
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
    </button>
    
    <!-- Hint -->
    <p class="absolute bottom-4 left-1/2 -translate-x-1/2 text-slate-500 text-sm z-10">Klicken zum Schliessen oder ESC drücken</p>
    
    <!-- Image -->
    <img 
        [src]="lightboxImage" 
        [alt]="lightboxAlt"
        class="relative z-10 max-w-full max-h-full object-contain rounded-lg shadow-2xl"
        (click)="$event.stopPropagation()"
    >
</div>
